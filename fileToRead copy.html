<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>File To Read</title>

	<!-- <link rel="stylesheet" type="text/css" href="/style-guide/css/fluig-style-guide.min.css"> -->
	<link rel="stylesheet" type="text/css" href="http://suaempresa.fluig.com/style-guide/css/fluig-style-guide.min.css">
	<!-- <script src="/portal/resources/js/jquery/jquery.js"></script> -->
	<script src="http://suaempresa.fluig.com/portal/resources/js/jquery/jquery.js"></script>
	<!-- <script src="/portal/resources/js/jquery/jquery-ui.min.js"></script> -->
	<script src="http://suaempresa.fluig.com/portal/resources/js/jquery/jquery-ui.min.js"></script>
	<!-- <script src="/portal/resources/js/mustache/mustache-min.js"></script> -->
	<script src="http://suaempresa.fluig.com/portal/resources/js/mustache/mustache-min.js"></script>
	<!-- <script src="/style-guide/js/fluig-style-guide.min.js"></script> -->
	<script src="http://suaempresa.fluig.com/style-guide/js/fluig-style-guide.min.js"></script>

	<!-- <script src="/style-guide/js/fluig-style-guide-codeeditor.min.js"></script> -->
	<!-- <script src="http://suaempresa.fluig.com/style-guide/js/fluig-style-guide-codeeditor.min.js"></script> -->

	<!-- <script src="/style-guide/plugins/codeeditor/worker-javascript.js"></script> -->
	<!-- <script src="http://suaempresa.fluig.com/style-guide/plugins/codeeditor/worker-javascript.js"></script> -->

	<script src="style-guide/js/fluig-style-guide-codeeditor.min.js"></script>
	<script src="style-guide/plugins/codeeditor/worker-javascript.js"></script>

	<style type="text/css">
		.textNoWrap {
			white-space: nowrap;
		}
	</style>

	<!-- <script>
		function showInstructions(showDiv) {
			if (showDiv) {
				$('#divInstructions').height('auto');
			}
			else {
				$('#divInstructions').height('1.3em');
			}
		}
	</script> -->
</head>
<body>

	<div class="fluig-style-guide">

		<div class="form-group">

			<label for="txtfiletoread">Arquivo para leitura:</label>
			
			<!-- EMMET Code:
			ddiv.panel-group.collapse-orange#accordion-variant-colors-instructions>div.panel.panel-default>((div.panel-heading>h4.panel-title.fs-text-md>{${newline}}+a.collpase-icon.collapsed[data-toggle=collapse][data-parent=#accordion-variant-colors-instructions][href=#collapseInstructions]{${newline}Arquivos: TXT; CSV (ponto e v&iacute;rgula); XML. ${newline}<strong class="fs-float-right fs-lg-margin-right">Mais Instru&ccedil;&otilde;es</strong>})+(div.panel-collapse.collapse[id=collapseInstructions]>div.panel-body>(dl>dt{Texto - Extens&atilde;o .txt}+dd{Texto simples}+dt.fs-sm-padding-top{CSV - Extens&atilde;o .csv}+dd{Arquivo texto com separa&ccedil;&atilde;o por ponto e v&iacute;rgula}+dt.fs-sm-padding-top{XML - Extens&atilde;o .xml}+dd({Arquivo XML. Formato:}+pre{${newline}&lt;rootData&gt;${newline}	&lt;item&gt;${newline}		&lt;item&gt;userName&lt;/item&gt;${newline}		&lt;item&gt;emails&lt;/item&gt;${newline}		&lt;item&gt;active&lt;/item&gt;${newline}		&lt;item&gt;displayName&lt;/item&gt;${newline}		&lt;item&gt;password&lt;/item&gt;${newline}		&lt;item&gt;department&lt;/item&gt;${newline}		&lt;item&gt;title&lt;/item&gt;${newline}		&lt;item&gt;manager&lt;/item&gt;${newline}		&lt;item&gt;groups&lt;/item&gt;${newline}		&lt;item&gt;externalId&lt;/item&gt;${newline}		&lt;item&gt;SRA-&gt;RA_MAT&lt;/item&gt;${newline}		&lt;item&gt;forceChangePassword&lt;/item&gt;${newline}		&lt;item&gt;groupRule&lt;/item&gt;${newline}	&lt;/item&gt;${newline}&lt;/rootData&gt;}))))
			 -->

			<div class="panel-group collapse-orange" id="accordion-variant-colors-instructions">
				<div class="panel panel-default">
					<div class="panel-heading">
						<h4 class="panel-title fs-text-md">
							<a href="#collapseInstructions" class="collapse-icon collapsed" data-toggle="collapse" data-parent="#accordion-variant-colors-instructions">
								Arquivos: TXT; CSV (ponto e v&iacute;rgula); XML. 
								<strong class="fs-float-right fs-lg-margin-right">Mais Instru&ccedil;&otilde;es</strong></a></h4>
					</div>
					<div class="panel-collapse collapse" id="collapseInstructions">
						<div class="panel-body">
							<dl class="dl-horizontal">
								<dt class="fs-sm-margin-bottom">Texto - Extens&atilde;o .txt</dt>
								<dd>Texto simples</dd>
								<dt class="fs-sm-margin-bottom">CSV - Extens&atilde;o .csv</dt>
								<dd>Arquivo texto com separa&ccedil;&atilde;o por ponto e v&iacute;rgula</dd>
								<dt class="fs-sm-margin-bottom">XML - Extens&atilde;o .xml</dt>
								<dd>Arquivo XML. Formato:

									<!-- fluig Style Guide - JavaScript Copy -->
									<!-- COMENTADO (REMOVIDO) - FALHA NO FUNCIONAMENTO :: FLUIGC.copy(...) -->
									<!-- <button class="btn btn-default btn-lg fluigicon fluigicon-copy fs-float-right icon-xl" id="btnTemplateCopy"></button>
									<script language="javascript">
										$('#btnTemplateCopy').on('click', function() {
											$(this).attr('data-clipboard-text', templateXmlUsersData.getValue());

											FLUIGC.copy('#' + $(this).attr('id'), {
												copyMessage: 'Exemplo copiado com sucesso!'
											});
										});
									</script> -->
										
										<!-- EMMET Code - XML Template - TOTVS Protheus User Dataset: -->
										<!-- {<?xml version="1.0" encoding="UTF-8" standalone="yes"?>}+{${newline}}+{<totvs-data-set xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">}+protheus-user-data>userName{login}+emails{given.lastname@domain}+active{true}+{<!}+{-- COMMENTS: Boolean value ("true" or "false") -}+{->}+displayName{Firstname Middlename Lastname}+{<!}+{-- COMMENTS: User Fullname -}+{->}+password{user5ecretP@ss}+department{Department of Labor}+title{Worker Function Name}+manager{[000456.0034NM]}+{<!}+{-- COMMENTS: Comma Separated Superior User Codes -}+{-> }+groups{[0263PG, 0211iH]}+{<!}+{-- COMMENTS: Comma-separated user access group codes -}+{->}+externalId{54ce0f61-3777-4289-9ce0-802b4baf08c7}+{<!}+{-- COMMENTS: UUID. External Unique ID. Usually equals Email or userName -}+{->}+registration{SRA->RA_MAT}+{<!}+{-- COMMENTS: Employee Code Field (SRA->RA_MAT) / Functional registration -}+{->}+forceChangePassword{false}+{<!}+{-- COMMENTS: Change Password Next Login. Boolean value ("true" or "false") -}+{->} -->
										
									<div id="templateXmlUsersData" style="position:relative; height:240px" data-type="text/template" class="fs-sm-margin-bottom">
										
										&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;<br>
										&lt;totvs-data-set xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;<br>
										&lt;protheus-user-data&gt;<br>
											&lt;userName&gt;login&lt;/userName&gt;<br>
											&lt;emails&gt;given.lastname@domain&lt;/emails&gt;<br>
											&lt;active&gt;true&lt;/active&gt;&lt;!-- COMMENTS: Boolean value ("true" or "false") --&gt;<br>
											&lt;displayName&gt;Firstname Middlename Lastname&lt;/displayName&gt;&lt;!-- COMMENTS: User Fullname --&gt;<br>
											&lt;password&gt;user5ecretP@ss&lt;/password&gt;<br>
											&lt;department&gt;Department of Labor&lt;/department&gt;<br>
											&lt;title&gt;Worker Function Name&lt;/title&gt;<br>
											&lt;manager&gt;[000456.0034NM]&lt;/manager&gt;&lt;!-- COMMENTS: Comma Separated Superior User Codes --&gt;<br>
											&lt;groups&gt;[0263PG, 0211iH]&lt;/groups&gt;&lt;!-- COMMENTS: Comma-separated user access group codes --&gt;<br>
											&lt;externalId&gt;54ce0f61-3777-4289-9ce0-802b4baf08c7&lt;/externalId&gt;&lt;!-- COMMENTS: UUID. External Unique ID. Usually equals Email or userName --&gt;<br>
											&lt;registration&gt;SRA-&gt;RA_MAT&lt;/registration&gt;&lt;!-- COMMENTS: Employee Code Field (SRA-&gt;RA_MAT) / Functional registration --&gt;<br>
											&lt;forceChangePassword&gt;false&lt;/forceChangePassword&gt;&lt;!-- COMMENTS: Change Password Next Login. Boolean value ("true" or "false") --&gt;<br>
										&lt;/protheus-user-data&gt;<br>

									</div>

									<!-- Download Template XML -->

									<div class="col-md-4 fs-no-padding">
    									<a id="docXmlTemplate" target="xmlDataTemplate">
											<button type="button" class="btn btn-blue-gradient btn-block btn-default">Download - Baixar arquivo modelo (XML)
												<span class="fluigicon fluigicon-file-download fs-float-left icon-md"></span>
    										</button>
    									</a>
									</div>

									<script language="javascript">
										$('#docXmlTemplate').on('click', function() {
	var xmlDataEncoded = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/Pgo8dG90dnMtZGF0YS1zZXQgeG1sbnM6eHNpPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSI+Cjxwcm90aGV1cy11c2VyLWRhdGE+Cgk8dXNlck5hbWU+bG9naW48L3VzZXJOYW1lPgoJPGVtYWlscz5naXZlbi5sYXN0bmFtZUBkb21haW48L2VtYWlscz4KCTxhY3RpdmU+dHJ1ZTwvYWN0aXZlPjwhLS0gQ09NTUVOVFM6IEJvb2xlYW4gdmFsdWUgKCJ0cnVlIiBvciAiZmFsc2UiKSAtLT4KCTxkaXNwbGF5TmFtZT5GaXJzdG5hbWUgTWlkZGxlbmFtZSBMYXN0bmFtZTwvZGlzcGxheU5hbWU+PCEtLSBDT01NRU5UUzogVXNlciBGdWxsbmFtZSAtLT4KCTxwYXNzd29yZD51c2VyNWVjcmV0UEBzczwvcGFzc3dvcmQ+Cgk8ZGVwYXJ0bWVudD5EZXBhcnRtZW50IG9mIExhYm9yPC9kZXBhcnRtZW50PgoJPHRpdGxlPldvcmtlciBGdW5jdGlvbiBOYW1lPC90aXRsZT4KCTxtYW5hZ2VyPlswMDA0NTYuMDAzNE5NXTwvbWFuYWdlcj48IS0tIENPTU1FTlRTOiBDb21tYSBTZXBhcmF0ZWQgU3VwZXJpb3IgVXNlciBDb2RlcyAtLT4KCTxncm91cHM+WzAyNjNQRywgMDIxMWlIXTwvZ3JvdXBzPjwhLS0gQ09NTUVOVFM6IENvbW1hLXNlcGFyYXRlZCB1c2VyIGFjY2VzcyBncm91cCBjb2RlcyAtLT4KCTxleHRlcm5hbElkPjU0Y2UwZjYxLTM3NzctNDI4OS05Y2UwLTgwMmI0YmFmMDhjNzwvZXh0ZXJuYWxJZD48IS0tIENPTU1FTlRTOiBVVUlELiBFeHRlcm5hbCBVbmlxdWUgSUQuIFVzdWFsbHkgZXF1YWxzIEVtYWlsIG9yIHVzZXJOYW1lIC0tPgoJPHJlZ2lzdHJhdGlvbj5TUkEtJmd0O1JBX01BVDwvcmVnaXN0cmF0aW9uPjwhLS0gQ09NTUVOVFM6IEVtcGxveWVlIENvZGUgRmllbGQgKFNSQS0+UkFfTUFUKSAvIEZ1bmN0aW9uYWwgcmVnaXN0cmF0aW9uIC0tPgoJPGZvcmNlQ2hhbmdlUGFzc3dvcmQ+ZmFsc2U8L2ZvcmNlQ2hhbmdlUGFzc3dvcmQ+PCEtLSBDT01NRU5UUzogQ2hhbmdlIFBhc3N3b3JkIE5leHQgTG9naW4uIEJvb2xlYW4gdmFsdWUgKCJ0cnVlIiBvciAiZmFsc2UiKSAtLT4KPC9wcm90aGV1cy11c2VyLWRhdGE+";

	$(this).attr('href', 'data:application/octet-stream;charset=UTF-8;base64,' + xmlDataEncoded).attr('download','file-template_protheus-user-data.xml');
});
									</script>

									<!-- Download template XML - Example (FUNCIONAL) -->
									<!-- <a href="data:application/octet-stream;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/Pgo8dG90dnMtZGF0YS1zZXQgeG1sbnM6eHNpPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSI+Cjxwcm90aGV1cy11c2VyLWRhdGE+Cgk8dXNlck5hbWU+bG9naW48L3VzZXJOYW1lPgoJPGVtYWlscz5naXZlbi5sYXN0bmFtZUBkb21haW48L2VtYWlscz4KCTxhY3RpdmU+dHJ1ZTwvYWN0aXZlPjwhLS0gQ09NTUVOVFM6IEJvb2xlYW4gdmFsdWUgKCJ0cnVlIiBvciAiZmFsc2UiKSAtLT4KCTxkaXNwbGF5TmFtZT5GaXJzdG5hbWUgTWlkZGxlbmFtZSBMYXN0bmFtZTwvZGlzcGxheU5hbWU+PCEtLSBDT01NRU5UUzogVXNlciBGdWxsbmFtZSAtLT4KCTxwYXNzd29yZD51c2VyNWVjcmV0UEBzczwvcGFzc3dvcmQ+Cgk8ZGVwYXJ0bWVudD5EZXBhcnRtZW50IG9mIExhYm9yPC9kZXBhcnRtZW50PgoJPHRpdGxlPldvcmtlciBGdW5jdGlvbiBOYW1lPC90aXRsZT4KCTxtYW5hZ2VyPlswMDA0NTYuMDAzNE5NXTwvbWFuYWdlcj48IS0tIENPTU1FTlRTOiBDb21tYSBTZXBhcmF0ZWQgU3VwZXJpb3IgVXNlciBDb2RlcyAtLT4KCTxncm91cHM+WzAyNjNQRywgMDIxMWlIXTwvZ3JvdXBzPjwhLS0gQ09NTUVOVFM6IENvbW1hLXNlcGFyYXRlZCB1c2VyIGFjY2VzcyBncm91cCBjb2RlcyAtLT4KCTxleHRlcm5hbElkPjU0Y2UwZjYxLTM3NzctNDI4OS05Y2UwLTgwMmI0YmFmMDhjNzwvZXh0ZXJuYWxJZD48IS0tIENPTU1FTlRTOiBVVUlELiBFeHRlcm5hbCBVbmlxdWUgSUQuIFVzdWFsbHkgZXF1YWxzIEVtYWlsIG9yIHVzZXJOYW1lIC0tPgoJPHJlZ2lzdHJhdGlvbj5TUkEtJmd0O1JBX01BVDwvcmVnaXN0cmF0aW9uPjwhLS0gQ09NTUVOVFM6IEVtcGxveWVlIENvZGUgRmllbGQgKFNSQS0+UkFfTUFUKSAvIEZ1bmN0aW9uYWwgcmVnaXN0cmF0aW9uIC0tPgoJPGZvcmNlQ2hhbmdlUGFzc3dvcmQ+ZmFsc2U8L2ZvcmNlQ2hhbmdlUGFzc3dvcmQ+PCEtLSBDT01NRU5UUzogQ2hhbmdlIFBhc3N3b3JkIE5leHQgTG9naW4uIEJvb2xlYW4gdmFsdWUgKCJ0cnVlIiBvciAiZmFsc2UiKSAtLT4KPC9wcm90aGV1cy11c2VyLWRhdGE+" download="template_protheus-user-data.xml">
										<i class="fluigicon fluigicon-file-download icon-md"></i>
										Baixar arquivo modelo
									</a> -->
								</dd>
							</dl>
						</div>
					</div>
				</div>
			</div>
			<script>
				// REMOVER ESPACOS EXCEDENTES NA FORMATACAO DO EXEMPLO DE XML		
				// $('pre')[0].innerText = $('pre')[0].innerText.replace(/\t{8}/g,'');
				
				// CRIAR COMPONENTE fluig Style Guide Editor
				var templateXmlUsersData = FLUIGC.codeeditor("templateXmlUsersData");
				// INSERIR TEXTO FORMATADO TEMPLATE XML
				var textValue = '';
				textValue += '	<?xml version="1.0" encoding="UTF-8" standalone="yes"?>' + '\n';
				textValue += '	<totvs-data-set xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">' + '\n';
				textValue += '	<protheus-user-data>' + '\n';
				textValue += '		<userName>login</userName>' + '\n';
				textValue += '		<emails>given.lastname@domain</emails>' + '\n';
				textValue += '		<active>true</active><!-- COMMENTS: Boolean value ("true" or "false") -->' + '\n';
				textValue += '		<displayName>Firstname Middlename Lastname</displayName><!-- COMMENTS: User Fullname -->' + '\n';
				textValue += '		<password>user5ecretP@ss</password>' + '\n';
				textValue += '		<department>Department of Labor</department>' + '\n';
				textValue += '		<title>Worker Function Name</title>' + '\n';
				textValue += '		<manager>[000456.0034NM]</manager><!-- COMMENTS: Comma Separated Superior User Codes -->' + '\n';
				textValue += '		<groups>[0263PG, 0211iH]</groups><!-- COMMENTS: Comma-separated user access group codes -->' + '\n';
				textValue += '		<externalId>54ce0f61-3777-4289-9ce0-802b4baf08c7</externalId><!-- COMMENTS: UUID. External Unique ID. Usually equals Email or userName -->' + '\n';
				textValue += '		<registration>SRA->RA_MAT</registration><!-- COMMENTS: Employee Code Field (SRA->RA_MAT) / Functional registration -->' + '\n';
				textValue += '		<forceChangePassword>false</forceChangePassword><!-- COMMENTS: Change Password Next Login. Boolean value ("true" or "false") -->' + '\n';
				textValue += '	</protheus-user-data>';

				templateXmlUsersData.setValue( textValue );
				templateXmlUsersData.setReadOnly( true );
				templateXmlUsersData.gotoLine(3);
			</script>

			<!-- <input type="file" id="txtfiletoread" name="txtfiletoread" class="form-control" accept="text/*,application/vnd.ms-excel" /> -->
			<input type="file" id="txtfiletoread" name="txtfiletoread" class="form-control btn btn-primary btn-md" accept=".csv, text/plain, .xml" />

			<div id="alertsFileTobeRead" class="fs-sm-margin"></div>

		</div>

		<div class="form-group fs-md-margin">
			<div id="tableUsers" style="overflow: auto;"></div>
			<script type="text/javascript">
				// EMMET :: {\{userName: 'user-TEST-$$$', emails: 'user-TEST-$$$'\}, ${newline}}*3
				dataUsers = [ ];
				// renderContent: ['userName', 'emails', 'active', 'displayName', 'password', 'department', 'title', 'manager', 'groups', 'externalId', 'registration', 'forceChangePassword', 'groupRule'],
				var dataTableUsers = FLUIGC.datatable('#tableUsers', {
					dataRequest: dataUsers,
					renderContent: '.tableUserLine',
					header: [
						{'title': 'Usuário'			, 'dataorder': 'userName'			, 'size': 'textNoWrap'}, 
						{'title': 'Email'			, 'dataorder': 'emails'				, 'size': 'textNoWrap'}, 
						{'title': 'Ativo'			, 'dataorder': 'active'				/*, 'size': 'col-md-3'*/}, 
						{'title': 'Nome'			, 'dataorder': 'displayName'		, 'standard': true, 'size': 'col-md-3 textNoWrap'}, 
						{'title': 'Senha'			, 'dataorder': 'password'			/*, 'size': 'col-md-3'*/}, 
						{'title': 'Departamento'	, 'dataorder': 'department'			/*, 'size': 'col-md-3'*/}, 
						{'title': 'Cargo'			, 'dataorder': 'title'				/*, 'size': 'col-md-3'*/}, 
						{'title': 'Superior'		, 'dataorder': 'manager'			/*, 'size': 'col-md-3'*/}, 
						{'title': 'Grupo(s)'		, 'dataorder': 'groups'				/*, 'size': 'col-md-3'*/}, 
						{'title': 'External ID'		, 'dataorder': 'externalId'			/*, 'size': 'col-md-3'*/}, 
						{'title': 'Matr&iacute;cula'		, 'dataorder': 'registration'		/*, 'size': 'col-md-3'*/}, 
						{'title': 'ALTERAR SENHA'	, 'dataorder': 'forceChangePassword'/*, 'size': 'col-md-3'*/}, 
						{'title': 'Priorizar'		, 'dataorder': 'groupRule'			/*, 'size': 'col-md-3'*/} 
					],
					search: {
						enabled: true,
						onSearch: function(response) {
							// DO SOMETHING
							console.info('DATATABLE Users :: Search().onSearch(response) function :: \n' + response);

							// TODO: Localizar os itens com o texto da ocorrencia (response)
							dataUsers.forEach( function(el,idx){ 
								console.log('idx = ' + idx.toString() + ' ;; e => ');
								console.log(el);

								for (userProp in el) { 
							// 		console.log('\t;;;; userProp = ' + userProp );
									console.log('\t;;;; el[\'userProp\'] = ' + el[userProp] + ' >>>> match ??? ' + el[userProp].match('caoa') ); 
								}
							});

							// TODO: Atualizar Datatable com linhas resultantes
							dataTableUsers.reload([ dataUsers[2] ] , '.tableUserLine');

							// TODO: Atualizar Datatable com linhas originais/carregadas/importadas se ocorrencia (response) vazio
							dataTableUsers.reload( dataUsers , '.tableUserLine');

						},
						onlyEnterkey: true,
						searchAreaStyle: 'col-md-3'
					},
					draggable: {
						enabled: true,
						onDrag: function(dragInfo) {
							console.info('DATATABLE Users :: Drag Drop operation');

							console.info('DATATABLE Users :: Draggable.onDrag(dragInfo) function :: ' 
								+ 'Drag And Drop OBJETO:\n' + JSON.stringify( dragInfo.data[0] ));
							console.warn('DATATABLE Users :: Draggable.onDrag(dragInfo) function :: ' 
								+ 'CORRIGIR CAMPO "SENHA", Password fluig Style Guide, APÓS EXECUTAR Drag And Drop - RECONSTRUIR Password');
							
							var fieldPasswordId = 'userPass_' + dragInfo.data[0].userName;

							var fieldPasswordHtml = '';
							fieldPasswordHtml += '<input type="password"';
							fieldPasswordHtml += ' class="form-control"'; // style="width:150px;"';
							fieldPasswordHtml += ' id="' + fieldPasswordId + '"';
							fieldPasswordHtml += ' value="userPass_' + dragInfo.data[0].password + '"';
							fieldPasswordHtml += ' style="min-width:140px;"';
							fieldPasswordHtml += ' />';

							$('#' + fieldPasswordId).parent().html( fieldPasswordHtml );
							FLUIGC.password('#' + fieldPasswordId, { 
								eyeClass: 'fluigicon', 
								eyeOpenClass: 'fluigicon-eye-open', 
								eyeCloseClass: 'fluigicon-key' 
							});
							
							// FIXME Switcher X Drag Drop - Corrigir campo "ALTERAR SENHA" apos Drag Drop

							// return false; // If it returns false, will cancel the draggable
						}
					}
				}, function(err, data) {
					console.info('#tableUsers > CONSTRUCAO DO OBJETO DATATABLE');
				});
			</script>
			<script type="text/template" class="tableUserLine">
				<tr>
					<td class="textNoWrap">{{userName}}</td>
					<td class="textNoWrap">{{emails}}</td>
					<td class="fs-txt-center fs-txt-middle">{{active}}</td>
					<td class="col-md-3 textNoWrap">{{displayName}}</td>
					<td class="col-md-4">
						<input type="password" class="form-control" id="userPass_{{userName}}" value="{{password}}" style="min-width:140px;"/>
					</td>
					<td>{{department}}</td>
					<td>{{title}}</td>
					<td class="fs-txt-center">{{manager}}</td>
					<td>{{groups}}</td>
					<td>{{externalId}}</td>
					<td class="fs-txt-center fs-txt-middle">{{registration}}</td>
					<td class="fs-txt-center fs-txt-middle">
						<div class="appSwitcherStyle">
							<!-- input[type=checkbox][data-import-value={{forceChangePassword}}][data-on-color=warning][data-on-text=SIM][ data-off-text=N&Atilde;O]#changePassUser_{{userName}} -->
							<input type="checkbox" data-import-value="{{forceChangePassword}}" data-on-color="warning" data-on-text="SIM" data-off-text="N&Atilde;O" id="changePassUser_{{userName}}">
							<!--  VALOR IMPORTADO: "{{forceChangePassword}}"  -->
						</div>
					</td>
					<td class="fs-txt-center fs-txt-middle">{{groupRule}}</td>
				</tr>
			</script>
		</div>

		<div class="form-group">
			<div class="col-md-12">
				<div class="row">
					<button id="getDataStorage" type="button" class="btn btn-info">Retornar dados</button>
					<button id="saveDataStorage" type="button" class="btn btn-primary">Gravar dados</button>
					<button id="loadDataStorage" type="button" class="btn btn-default">Carregar dados</button>
				</div>
			</div>
			<div class="col-md-12">
				<textarea name="dataSaved" id="dataSaved" cols="30" rows="10" class="form-control"></textarea>
			</div>
			<script language="javascript">
				var memoUserLocal;

				$('#getDataStorage').on('click', function() {
					memoUserLocal = FLUIGC.localStorage.getItem('protheusUsersData');
					$('textarea[name=dataSaved]').text( JSON.stringify( memoUserLocal ) );
				});

				function getUserObject(userDataArray) {
					var userProperties = ['userName', 'emails', 'active', 'displayName', 'password', 'department', 'title', 'manager', 'groups', 'externalId', 'registration', 'forceChangePassword', 'groupRule'];
					var objUser = {};
					for (var i = 0; i < userProperties.length; i++) {
						if (typeof(userDataArray) == 'object' && Array.isArray(userDataArray) && i < userDataArray.length) {
							objUser[ userProperties[i] ] = userDataArray[i];
						}
						else {
							objUser[ userProperties[i] ] = null;
						}
					}
					return objUser;
				}

				$('#saveDataStorage').on('click', function() {
					// Datatable.getData() - Retorna dados padrao Datatable.dataRequest (Array / JSON)
					var actualData = dataTableUsers.getData();
					actualData.forEach( function(itemData,idx) { 
						var fieldId = 'changePassUser_' + itemData.userName;
						var isChecked = $('#' + fieldId).is(':checked')
						itemData['forceChangePassword'] = isChecked;
						// Corrigir atributo de tag HTML
						if (isChecked) {
							$('#' + fieldId).attr('checked', true);
						}
						else {
							$('#' + fieldId).attr('checked', null);
						}
					});
					
					// Percorrer tabela estado atual exibido e atualizar fonte de dados
					// $('#tableUsers [id*=changePassUser_]').each( function(idx,el) { 
					// 	console.log( 'el ==>> id="' + el.id + '" IS CHECKED? ' + $(this).is(':checked')); 
					// 	dataUsers[idx]['forceChangePassword'] = $(this).is(':checked');
					// });

					FLUIGC.localStorage.setItem('protheusUsersData', JSON.stringify( actualData ));
				});

				$('#loadDataStorage').on('click', function() {
					var objStored;
					try {
						objStored = $('textarea[name=dataSaved]').val() || JSON.stringify( FLUIGC.localStorage.getItem('protheusUsersData') );
						objStored = JSON.parse( objStored );
						// Array of Array - Vetor de valores, dados de usuario(s)
						if (Array.isArray(objStored) && Array.isArray(objStored[0])) {
							// Transformar itens do vetor em objeto de dados
							objStored.forEach(function(itemData,idx) {
								objStored[idx] = getUserObject(itemData);
							})
						}
						// dataUsers = objStored;
						dataTableUsers.reload(objStored, '.tableUserLine'); //dataTableUsers.reload(dataUsers, '.tableUserLine');
						// TODO input[type=password] => aplicar fluig Style Guide
						$('input[type=password][id*=userPass_]').each(function(idx,el) {
							FLUIGC.password( el , {
								eyeClass: 'fluigicon',
								eyeOpenClass: 'fluigicon-eye-open',
								eyeCloseClass: 'fluigicon-key'
							});
						});
						// TODO input[type=checkbox] => aplicar fluig Style Guide (Switcher)
						$('.appSwitcherStyle [data-import-value=true]').attr('checked',true);
						// FLUIGC.switcher.initAll('.' + 'appSwitcherStyle');
						FLUIGC.toast({
							title: 'C&oacute;digo de dados: ',
							message: 'Conte&uacute;do listado na tabela',
							type: 'success'
						});
					} catch (error) {
						FLUIGC.toast({
							title: 'C&oacute;digo de dados: ',
							message: 'Falha de carregamento!',
							type: 'warning'
						});
						// FIXME FLUIGC.toast "ERROR" não fechar automaticamento, timeout configurado
						FLUIGC.toast({
							title: 'ERROR: ',
							message: error.message,
							timeout: 1000,
							type: 'danger'
						});
					}
				});
			</script>
		</div>

	</div>

</body>

<script type="text/javascript" src="js/fileToRead.js"></script>

</html>