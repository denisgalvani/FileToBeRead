<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>File To Read</title>

	<!-- <link rel="stylesheet" type="text/css" href="/style-guide/css/fluig-style-guide.min.css"> -->
	<link rel="stylesheet" type="text/css" href="http://suaempresa.fluig.com/style-guide/css/fluig-style-guide.min.css">
	<!-- <script src="/portal/resources/js/jquery/jquery.js"></script> -->
	<script src="http://suaempresa.fluig.com/portal/resources/js/jquery/jquery.js"></script>
	<!-- <script src="/portal/resources/js/jquery/jquery-ui.min.js"></script> -->
	<script src="http://suaempresa.fluig.com/portal/resources/js/jquery/jquery-ui.min.js"></script>
	<!-- <script src="/portal/resources/js/mustache/mustache-min.js"></script> -->
	<script src="http://suaempresa.fluig.com/portal/resources/js/mustache/mustache-min.js"></script>
	<!-- <script src="/style-guide/js/fluig-style-guide.min.js"></script> -->
	<script src="http://suaempresa.fluig.com/style-guide/js/fluig-style-guide.min.js"></script>

	<!-- <script src="/style-guide/js/fluig-style-guide-codeeditor.min.js"></script> -->
	<!-- <script src="http://suaempresa.fluig.com/style-guide/js/fluig-style-guide-codeeditor.min.js"></script> -->

	<!-- <script src="/style-guide/plugins/codeeditor/worker-javascript.js"></script> -->
	<!-- <script src="http://suaempresa.fluig.com/style-guide/plugins/codeeditor/worker-javascript.js"></script> -->

	<script src="style-guide/js/fluig-style-guide-codeeditor.min.js"></script>
	<script src="style-guide/plugins/codeeditor/worker-javascript.js"></script>

	<!-- <link rel="stylesheet" type="text/css" href="/style-guide/css/fluig-style-guide-orgchart.min.css"> -->
	<link rel="stylesheet" type="text/css" href="http://suaempresa.fluig.com/style-guide/css/fluig-style-guide-orgchart.min.css">
	<!-- <script src="/style-guide/js/fluig-style-guide-orgchart.min.js"></script> -->
	<script src="http://suaempresa.fluig.com/style-guide/js/fluig-style-guide-orgchart.min.js"></script>

	<style type="text/css">
		.textNoWrap {
			white-space: nowrap;
		}
	</style>

	<!-- <script>
		function showInstructions(showDiv) {
			if (showDiv) {
				$('#divInstructions').height('auto');
			}
			else {
				$('#divInstructions').height('1.3em');
			}
		}
	</script> -->
</head>
<body>

	<div class="fluig-style-guide">

		<div class="col-md-8" id="infoUsersTable">

			<h2>Tabela de Dados <small>Usu&aacute;rios</small></h2>

			<div class="form-group">

				<label for="txtfiletoread">Arquivo para leitura:</label>
				
				<!-- EMMET Code:
				ddiv.panel-group.collapse-orange#accordion-variant-colors-instructions>div.panel.panel-default>((div.panel-heading>h4.panel-title.fs-text-md>{${newline}}+a.collpase-icon.collapsed[data-toggle=collapse][data-parent=#accordion-variant-colors-instructions][href=#collapseInstructions]{${newline}Arquivos: TXT; CSV (ponto e v&iacute;rgula); XML. ${newline}<strong class="fs-float-right fs-lg-margin-right">Mais Instru&ccedil;&otilde;es</strong>})+(div.panel-collapse.collapse[id=collapseInstructions]>div.panel-body>(dl>dt{Texto - Extens&atilde;o .txt}+dd{Texto simples}+dt.fs-sm-padding-top{CSV - Extens&atilde;o .csv}+dd{Arquivo texto com separa&ccedil;&atilde;o por ponto e v&iacute;rgula}+dt.fs-sm-padding-top{XML - Extens&atilde;o .xml}+dd({Arquivo XML. Formato:}+pre{${newline}&lt;rootData&gt;${newline}	&lt;item&gt;${newline}		&lt;item&gt;userName&lt;/item&gt;${newline}		&lt;item&gt;emails&lt;/item&gt;${newline}		&lt;item&gt;active&lt;/item&gt;${newline}		&lt;item&gt;displayName&lt;/item&gt;${newline}		&lt;item&gt;password&lt;/item&gt;${newline}		&lt;item&gt;department&lt;/item&gt;${newline}		&lt;item&gt;title&lt;/item&gt;${newline}		&lt;item&gt;manager&lt;/item&gt;${newline}		&lt;item&gt;groups&lt;/item&gt;${newline}		&lt;item&gt;externalId&lt;/item&gt;${newline}		&lt;item&gt;SRA-&gt;RA_MAT&lt;/item&gt;${newline}		&lt;item&gt;forceChangePassword&lt;/item&gt;${newline}		&lt;item&gt;groupRule&lt;/item&gt;${newline}	&lt;/item&gt;${newline}&lt;/rootData&gt;}))))
				-->

				<!-- Group :: Collapse :: Mais Instrucoes -->
				<div class="panel-group collapse-orange" id="accordion-variant-colors-instructions">
					<div class="panel panel-default">
						<div class="panel-heading">
							<h4 class="panel-title fs-text-md">
								<a href="#collapseInstructions" class="collapse-icon collapsed" data-toggle="collapse" data-parent="#accordion-variant-colors-instructions">
									Arquivos: TXT; CSV (ponto e v&iacute;rgula); XML. 
									<strong class="fs-float-right fs-lg-margin-right">Mais Instru&ccedil;&otilde;es</strong></a></h4>
						</div>
						<div class="panel-collapse collapse" id="collapseInstructions">
							<div class="panel-body">
								<dl class="dl-horizontal">
									<dt class="fs-sm-margin-bottom">Texto - Extens&atilde;o .txt</dt>
									<dd>Texto simples</dd>
									<dt class="fs-sm-margin-bottom">CSV - Extens&atilde;o .csv</dt>
									<dd>Arquivo texto com separa&ccedil;&atilde;o por ponto e v&iacute;rgula</dd>
									<dt class="fs-sm-margin-bottom">XML - Extens&atilde;o .xml</dt>
									<dd>Arquivo XML. Formato:

										<!-- fluig Style Guide - JavaScript Copy -->
										<!-- COMENTADO (REMOVIDO) - FALHA NO FUNCIONAMENTO :: FLUIGC.copy(...) -->
										<!-- <button class="btn btn-default btn-lg fluigicon fluigicon-copy fs-float-right icon-xl" id="btnTemplateCopy"></button>
										<script language="javascript">
											$('#btnTemplateCopy').on('click', function() {
												$(this).attr('data-clipboard-text', templateXmlUsersData.getValue());

												FLUIGC.copy('#' + $(this).attr('id'), {
													copyMessage: 'Exemplo copiado com sucesso!'
												});
											});
										</script> -->
											
											<!-- EMMET Code - XML Template - TOTVS Protheus User Dataset: -->
											<!-- {<?xml version="1.0" encoding="UTF-8" standalone="yes"?>}+{${newline}}+{<totvs-data-set xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">}+protheus-user-data>userName{login}+emails{given.lastname@domain}+active{true}+{<!}+{-- COMMENTS: Boolean value ("true" or "false") -}+{->}+displayName{Firstname Middlename Lastname}+{<!}+{-- COMMENTS: User Fullname -}+{->}+password{user5ecretP@ss}+department{Department of Labor}+title{Worker Function Name}+manager{[000456.0034NM]}+{<!}+{-- COMMENTS: Comma Separated Superior User Codes -}+{-> }+groups{[0263PG, 0211iH]}+{<!}+{-- COMMENTS: Comma-separated user access group codes -}+{->}+externalId{54ce0f61-3777-4289-9ce0-802b4baf08c7}+{<!}+{-- COMMENTS: UUID. External Unique ID. Usually equals Email or userName -}+{->}+registration{SRA->RA_MAT}+{<!}+{-- COMMENTS: Employee Code Field (SRA->RA_MAT) / Functional registration -}+{->}+forceChangePassword{false}+{<!}+{-- COMMENTS: Change Password Next Login. Boolean value ("true" or "false") -}+{->} -->
											
										<!-- div#templateXmlUsersData style=height:240px // 16 lines = 240px // 16 lines = 20.95em -->
										<div id="templateXmlUsersData" style="position:relative; height:20.95em" data-type="text/template" class="fs-sm-margin-bottom fs-color-danger">
											
											&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;<br>
											&lt;totvs-data-set xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;<br>
											&lt;protheus-user-data&gt;<br>
												&lt;userName&gt;login&lt;/userName&gt;<br>
												&lt;emails&gt;given.lastname@domain&lt;/emails&gt;<br>
												&lt;active&gt;true&lt;/active&gt;&lt;!-- COMMENTS: Boolean value ("true" or "false") --&gt;<br>
												&lt;displayName&gt;Firstname Middlename Lastname&lt;/displayName&gt;&lt;!-- COMMENTS: User Fullname --&gt;<br>
												&lt;password&gt;user5ecretP@ss&lt;/password&gt;<br>
												&lt;department&gt;Department of Labor&lt;/department&gt;<br>
												&lt;title&gt;Worker Function Name&lt;/title&gt;<br>
												&lt;manager&gt;[000456.0034NM]&lt;/manager&gt;&lt;!-- COMMENTS: Comma Separated Superior User Codes --&gt;<br>
												&lt;groups&gt;[0263PG, 0211iH]&lt;/groups&gt;&lt;!-- COMMENTS: Comma-separated user access group codes --&gt;<br>
												&lt;externalId&gt;54ce0f61-3777-4289-9ce0-802b4baf08c7&lt;/externalId&gt;&lt;!-- COMMENTS: UUID. External Unique ID. Usually equals Email or userName --&gt;<br>
												&lt;registration&gt;SRA-&gt;RA_MAT&lt;/registration&gt;&lt;!-- COMMENTS: Employee Code Field (SRA-&gt;RA_MAT) / Functional registration --&gt;<br>
												&lt;forceChangePassword&gt;false&lt;/forceChangePassword&gt;&lt;!-- COMMENTS: Change Password Next Login. Boolean value ("true" or "false") --&gt;<br>
											&lt;/protheus-user-data&gt;<br>

										</div>

										<!-- Download Template XML -->

										<div class="fs-display-inline-block">
											<a id="docXmlTemplate" target="xmlDataTemplate">
												<button type="button" class="btn btn-blue-gradient btn-block btn-default">Download - Baixar arquivo modelo (XML)
													<span class="fluigicon fluigicon-file-download icon-md fs-float-left fs-md-margin-right"></span>
												</button>
											</a>
										</div>

										<script language="javascript">
											$('#docXmlTemplate').on('click', function() {
		var xmlDataEncoded = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/Pgo8dG90dnMtZGF0YS1zZXQgeG1sbnM6eHNpPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSI+Cjxwcm90aGV1cy11c2VyLWRhdGE+Cgk8dXNlck5hbWU+bG9naW48L3VzZXJOYW1lPgoJPGVtYWlscz5naXZlbi5sYXN0bmFtZUBkb21haW48L2VtYWlscz4KCTxhY3RpdmU+dHJ1ZTwvYWN0aXZlPjwhLS0gQ09NTUVOVFM6IEJvb2xlYW4gdmFsdWUgKCJ0cnVlIiBvciAiZmFsc2UiKSAtLT4KCTxkaXNwbGF5TmFtZT5GaXJzdG5hbWUgTWlkZGxlbmFtZSBMYXN0bmFtZTwvZGlzcGxheU5hbWU+PCEtLSBDT01NRU5UUzogVXNlciBGdWxsbmFtZSAtLT4KCTxwYXNzd29yZD51c2VyNWVjcmV0UEBzczwvcGFzc3dvcmQ+Cgk8ZGVwYXJ0bWVudD5EZXBhcnRtZW50IG9mIExhYm9yPC9kZXBhcnRtZW50PgoJPHRpdGxlPldvcmtlciBGdW5jdGlvbiBOYW1lPC90aXRsZT4KCTxtYW5hZ2VyPlswMDA0NTYuMDAzNE5NXTwvbWFuYWdlcj48IS0tIENPTU1FTlRTOiBDb21tYSBTZXBhcmF0ZWQgU3VwZXJpb3IgVXNlciBDb2RlcyAtLT4KCTxncm91cHM+WzAyNjNQRywgMDIxMWlIXTwvZ3JvdXBzPjwhLS0gQ09NTUVOVFM6IENvbW1hLXNlcGFyYXRlZCB1c2VyIGFjY2VzcyBncm91cCBjb2RlcyAtLT4KCTxleHRlcm5hbElkPjU0Y2UwZjYxLTM3NzctNDI4OS05Y2UwLTgwMmI0YmFmMDhjNzwvZXh0ZXJuYWxJZD48IS0tIENPTU1FTlRTOiBVVUlELiBFeHRlcm5hbCBVbmlxdWUgSUQuIFVzdWFsbHkgZXF1YWxzIEVtYWlsIG9yIHVzZXJOYW1lIC0tPgoJPHJlZ2lzdHJhdGlvbj5TUkEtJmd0O1JBX01BVDwvcmVnaXN0cmF0aW9uPjwhLS0gQ09NTUVOVFM6IEVtcGxveWVlIENvZGUgRmllbGQgKFNSQS0+UkFfTUFUKSAvIEZ1bmN0aW9uYWwgcmVnaXN0cmF0aW9uIC0tPgoJPGZvcmNlQ2hhbmdlUGFzc3dvcmQ+ZmFsc2U8L2ZvcmNlQ2hhbmdlUGFzc3dvcmQ+PCEtLSBDT01NRU5UUzogQ2hhbmdlIFBhc3N3b3JkIE5leHQgTG9naW4uIEJvb2xlYW4gdmFsdWUgKCJ0cnVlIiBvciAiZmFsc2UiKSAtLT4KPC9wcm90aGV1cy11c2VyLWRhdGE+";

		$(this).attr('href', 'data:application/octet-stream;charset=UTF-8;base64,' + xmlDataEncoded).attr('download','file-template_protheus-user-data.xml');
	});
										</script>

										<!-- Download template XML - Example (FUNCIONAL) -->
										<!-- <a href="data:application/octet-stream;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/Pgo8dG90dnMtZGF0YS1zZXQgeG1sbnM6eHNpPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSI+Cjxwcm90aGV1cy11c2VyLWRhdGE+Cgk8dXNlck5hbWU+bG9naW48L3VzZXJOYW1lPgoJPGVtYWlscz5naXZlbi5sYXN0bmFtZUBkb21haW48L2VtYWlscz4KCTxhY3RpdmU+dHJ1ZTwvYWN0aXZlPjwhLS0gQ09NTUVOVFM6IEJvb2xlYW4gdmFsdWUgKCJ0cnVlIiBvciAiZmFsc2UiKSAtLT4KCTxkaXNwbGF5TmFtZT5GaXJzdG5hbWUgTWlkZGxlbmFtZSBMYXN0bmFtZTwvZGlzcGxheU5hbWU+PCEtLSBDT01NRU5UUzogVXNlciBGdWxsbmFtZSAtLT4KCTxwYXNzd29yZD51c2VyNWVjcmV0UEBzczwvcGFzc3dvcmQ+Cgk8ZGVwYXJ0bWVudD5EZXBhcnRtZW50IG9mIExhYm9yPC9kZXBhcnRtZW50PgoJPHRpdGxlPldvcmtlciBGdW5jdGlvbiBOYW1lPC90aXRsZT4KCTxtYW5hZ2VyPlswMDA0NTYuMDAzNE5NXTwvbWFuYWdlcj48IS0tIENPTU1FTlRTOiBDb21tYSBTZXBhcmF0ZWQgU3VwZXJpb3IgVXNlciBDb2RlcyAtLT4KCTxncm91cHM+WzAyNjNQRywgMDIxMWlIXTwvZ3JvdXBzPjwhLS0gQ09NTUVOVFM6IENvbW1hLXNlcGFyYXRlZCB1c2VyIGFjY2VzcyBncm91cCBjb2RlcyAtLT4KCTxleHRlcm5hbElkPjU0Y2UwZjYxLTM3NzctNDI4OS05Y2UwLTgwMmI0YmFmMDhjNzwvZXh0ZXJuYWxJZD48IS0tIENPTU1FTlRTOiBVVUlELiBFeHRlcm5hbCBVbmlxdWUgSUQuIFVzdWFsbHkgZXF1YWxzIEVtYWlsIG9yIHVzZXJOYW1lIC0tPgoJPHJlZ2lzdHJhdGlvbj5TUkEtJmd0O1JBX01BVDwvcmVnaXN0cmF0aW9uPjwhLS0gQ09NTUVOVFM6IEVtcGxveWVlIENvZGUgRmllbGQgKFNSQS0+UkFfTUFUKSAvIEZ1bmN0aW9uYWwgcmVnaXN0cmF0aW9uIC0tPgoJPGZvcmNlQ2hhbmdlUGFzc3dvcmQ+ZmFsc2U8L2ZvcmNlQ2hhbmdlUGFzc3dvcmQ+PCEtLSBDT01NRU5UUzogQ2hhbmdlIFBhc3N3b3JkIE5leHQgTG9naW4uIEJvb2xlYW4gdmFsdWUgKCJ0cnVlIiBvciAiZmFsc2UiKSAtLT4KPC9wcm90aGV1cy11c2VyLWRhdGE+" download="template_protheus-user-data.xml">
											<i class="fluigicon fluigicon-file-download icon-md fs-float-left fs-md-margin-right"></i>
											Baixar arquivo modelo
										</a> -->
									</dd>
								</dl>
							</div>
						</div>
					</div>
				</div>
				<!-- Script :: Collapse :: Mais Instrucoes - Topic XML Extension - Button Download Template Archive -->
				<script>
					// REMOVER ESPACOS EXCEDENTES NA FORMATACAO DO EXEMPLO DE XML		
					// $('pre')[0].innerText = $('pre')[0].innerText.replace(/\t{8}/g,'');
					
					// CRIAR COMPONENTE fluig Style Guide Editor
					var templateXmlUsersData = FLUIGC.codeeditor("templateXmlUsersData");
					// INSERIR TEXTO FORMATADO TEMPLATE XML
					var textValue = '';
					textValue += '	<?xml version="1.0" encoding="UTF-8" standalone="yes"?>' + '\n';
					textValue += '	<totvs-data-set xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">' + '\n';
					textValue += '	<protheus-user-data>' + '\n';
					textValue += '		<userName>login</userName>' + '\n';
					textValue += '		<emails>given.lastname@domain</emails>' + '\n';
					textValue += '		<active>true</active><!-- COMMENTS: Boolean value ("true" or "false") -->' + '\n';
					textValue += '		<displayName>Firstname Middlename Lastname</displayName><!-- COMMENTS: User Fullname -->' + '\n';
					textValue += '		<password>user5ecretP@ss</password>' + '\n';
					textValue += '		<department>Department of Labor</department>' + '\n';
					textValue += '		<title>Worker Function Name</title>' + '\n';
					textValue += '		<manager>[000456.0034NM]</manager><!-- COMMENTS: Comma Separated Superior User Codes -->' + '\n';
					textValue += '		<groups>[0263PG, 0211iH]</groups><!-- COMMENTS: Comma-separated user access group codes -->' + '\n';
					textValue += '		<externalId>54ce0f61-3777-4289-9ce0-802b4baf08c7</externalId><!-- COMMENTS: UUID. External Unique ID. Usually equals Email or userName -->' + '\n';
					textValue += '		<registration>SRA->RA_MAT</registration><!-- COMMENTS: Employee Code Field (SRA->RA_MAT) / Functional registration -->' + '\n';
					textValue += '		<forceChangePassword>false</forceChangePassword><!-- COMMENTS: Change Password Next Login. Boolean value ("true" or "false") -->' + '\n';
					textValue += '	</protheus-user-data>';

					templateXmlUsersData.setValue( textValue );
					templateXmlUsersData.setReadOnly( true );
					templateXmlUsersData.gotoLine(3);
				</script>

				<!-- Field :: Archive Data (TXT, CSV, XML) :: TOTVS API Framework V1 Users -->
				<!-- <input type="file" id="txtfiletoread" name="txtfiletoread" class="form-control" accept="text/*,application/vnd.ms-excel" /> -->
				<input type="file" id="txtfiletoread" name="txtfiletoread" class="form-control btn btn-primary btn-md" accept=".csv, text/plain, .xml" />

				<div id="alertsFileTobeRead" class="fs-sm-margin"></div>

			</div>

			<div class="form-group fs-md-margin">
				<div id="tableUsers" style="overflow: auto;"></div>
				<script type="text/javascript">
					// EMMET :: {\{userName: 'user-TEST-$$$', emails: 'user-TEST-$$$'\}, ${newline}}*3
					dataUsers = [ ]; 
					// dataInit = null;
					// renderContent: ['userName', 'emails', 'active', 'displayName', 'password', 'department', 'title', 'manager', 'groups', 'externalId', 'registration', 'forceChangePassword', 'groupRule'],
					var thisTable = dataTableUsers = FLUIGC.datatable('#tableUsers', {
						dataRequest: dataUsers,
						renderContent: '.tableUserLine',
						header: [
							{'title': 'Usuário'			, 'dataorder': 'userName'			, 'size': 'textNoWrap'}, 
							{'title': 'Email'			, 'dataorder': 'emails'				, 'size': 'textNoWrap'}, 
							{'title': 'Ativo'			, 'dataorder': 'active'				/*, 'size': 'col-md-3'*/}, 
							{'title': 'Nome'			, 'dataorder': 'displayName'		, 'standard': true, 'size': 'col-md-3 textNoWrap'}, 
							{'title': 'Senha'			, 'dataorder': 'password'			/*, 'size': 'col-md-3'*/}, 
							{'title': 'Departamento'	, 'dataorder': 'department'			/*, 'size': 'col-md-3'*/}, 
							{'title': 'Cargo'			, 'dataorder': 'title'				/*, 'size': 'col-md-3'*/}, 
							{'title': 'Superior'		, 'dataorder': 'manager'			/*, 'size': 'col-md-3'*/}, 
							{'title': 'Grupo(s)'		, 'dataorder': 'groups'				/*, 'size': 'col-md-3'*/}, 
							{'title': 'External ID'		, 'dataorder': 'externalId'			/*, 'size': 'col-md-3'*/}, 
							{'title': 'Matr&iacute;cula'		, 'dataorder': 'registration'		/*, 'size': 'col-md-3'*/}, 
							{'title': 'ALTERAR SENHA'	, 'dataorder': 'forceChangePassword'/*, 'size': 'col-md-3'*/}, 
							{'title': 'Priorizar'		, 'dataorder': 'groupRule'			/*, 'size': 'col-md-3'*/} 
						],
						search: {
							enabled: true,
							onlyEnterkey: true,
							// searchAreaStyle: 'col-md-3',
							tableStyle: 'table-striped',
							onSearch: function(res) {
								console.info('DATATABLE Users :: Search().onSearch(res) function :: find for "' + res + '"');

								if (!res) {
									// that.myTable.reload(dataInit);
									thisTable.reload(dataUsers);
									fsApplyFields(false);
									return; // SAIR DA FUNCAO, SEM VALOR DE BUSCA
								}
								// var dataAll = that.myTable.getData();
								var dataAll = dataUsers; // BUSCAR DADOS ORIGINAIS/INICIAIS/COMPLETOS // thisTable.getData();
								var search = dataAll.filter(function(el) {
									// return el.userName.toUpperCase().indexOf(res.toUpperCase()) >= 0
									// 	|| el.emails.toUpperCase().indexOf(res.toUpperCase()) >= 0
									// 	|| el.displayName.toUpperCase().indexOf(res.toUpperCase()) >= 0;
									// el.emails AS OBJECT ARRAY
									return el.userName.toUpperCase().indexOf(res.toUpperCase()) >= 0
										|| el.emails.toString().toUpperCase().indexOf(res.toUpperCase()) >= 0
										|| el.displayName.toUpperCase().indexOf(res.toUpperCase()) >= 0;
								});
								if (search && search.length) {
									// that.myTable.reload(search);
									thisTable.reload(search);
									fsApplyFields();
								} else {
									FLUIGC.toast({
										title: 'Buscar: ',
										message: 'Nenhum registro encontrado',
										type: 'warning'
									});
								}
							}
						},
						draggable: {
							enabled: true,
							onDrag: function(dragInfo) {
								console.info('DATATABLE Users :: Drag Drop operation');

								console.info('DATATABLE Users :: Draggable.onDrag(dragInfo) function :: ' 
									+ 'Drag And Drop OBJETO:\n' + JSON.stringify( dragInfo.data[0] ));
								console.warn('DATATABLE Users :: Draggable.onDrag(dragInfo) function :: ' 
									+ 'CORRIGIR CAMPO "SENHA", Password fluig Style Guide, APÓS EXECUTAR Drag And Drop - RECONSTRUIR Password');
								
								var fieldPasswordId = 'userPass_' + dragInfo.data[0].userName;

								var fieldPasswordHtml = '';
								fieldPasswordHtml += '<input type="password"';
								fieldPasswordHtml += ' class="form-control"'; // style="width:150px;"';
								fieldPasswordHtml += ' id="' + fieldPasswordId + '"';
								fieldPasswordHtml += ' value="userPass_' + dragInfo.data[0].password + '"';
								fieldPasswordHtml += ' style="min-width:140px;"';
								fieldPasswordHtml += ' />';

								$('#' + fieldPasswordId).parent().html( fieldPasswordHtml );
								FLUIGC.password('#' + fieldPasswordId, { 
									eyeClass: 'fluigicon', 
									eyeOpenClass: 'fluigicon-eye-open', 
									eyeCloseClass: 'fluigicon-key' 
								});
								
								// FIXME Switcher X Drag Drop - Corrigir campo "ALTERAR SENHA" apos Drag Drop

								// return false; // If it returns false, will cancel the draggable
							}
						}
					}, function(err, data) {
						console.info('#tableUsers > CONSTRUCAO DO OBJETO DATATABLE');

						if(data) {
							dataUsers = data;
						}
					});
				</script>
				<script type="text/template" class="tableUserLine">
					<tr>
						<td class="textNoWrap">{{userName}}</td>
						<td class="textNoWrap">{{emails}}</td>
						<td class="fs-txt-center fs-txt-middle">{{active}}</td>
						<td class="col-md-3 textNoWrap">{{displayName}}</td>
						<td class="col-md-4">
							<!-- <input type="password" class="form-control" id="userPass_{{userName}}" value="{{password}}" style="min-width:140px;"/> -->
							<input type="password" class="form-control" id="userPass___{{id}}" value="{{password}}" style="min-width:140px;"/>
						</td>
						<td>{{department}}</td>
						<td>{{title}}</td>
						<td class="fs-txt-center">{{manager}}</td>
						<td>{{groups}}</td>
						<td>{{externalId}}</td>
						<td class="fs-txt-center fs-txt-middle">{{registration}}</td>
						<td class="fs-txt-center fs-txt-middle">
							<div class="appSwitcherStyle">
								<!-- input[type=checkbox][data-import-value={{forceChangePassword}}][data-on-color=warning][data-on-text=SIM][ data-off-text=N&Atilde;O]#changePassUser_{{userName}} -->
								<!-- <input type="checkbox" data-import-value="{{forceChangePassword}}" data-on-color="warning" data-on-text="SIM" data-off-text="N&Atilde;O" id="changePassUser_{{userName}}"> -->
								<input type="checkbox" data-import-value="{{forceChangePassword}}" data-on-color="warning" data-on-text="SIM" data-off-text="N&Atilde;O" id="changePassUser___{{id}}">
								<!--  VALOR IMPORTADO: "{{forceChangePassword}}"  -->
							</div>
						</td>
						<td class="fs-txt-center fs-txt-middle">{{groupRule}}</td>
					</tr>
				</script>
			</div>

			<div class="form-group">
				<div class="col-md-12">
					<div class="row">
						<button id="getDataStorage" type="button" class="btn btn-info">Retornar dados</button>
						<button id="saveDataStorage" type="button" class="btn btn-primary">Gravar dados</button>
						<button id="loadDataStorage" type="button" class="btn btn-default">Carregar dados</button>
					</div>
				</div>
				<div class="col-md-12 fs-md-margin-vertical">
					<textarea name="dataSaved" id="dataSaved" cols="30" rows="10" class="form-control"></textarea>
				</div>
				<script language="javascript">
					var memoUserLocal;

					$('#getDataStorage').on('click', function() {
						memoUserLocal = FLUIGC.localStorage.getItem('protheusUsersData');
						$('textarea[name=dataSaved]').text( JSON.stringify( memoUserLocal ) );
					});

					function getUserObject(userDataArray) {
						var userProperties = ['userName', 'emails', 'active', 'displayName', 'password', 'department', 'title', 'manager', 'groups', 'externalId', 'registration', 'forceChangePassword', 'groupRule'];
						var objUser = {};
						for (var i = 0; i < userProperties.length; i++) {
							if (typeof(userDataArray) == 'object' && Array.isArray(userDataArray) && i < userDataArray.length) {
								objUser[ userProperties[i] ] = userDataArray[i];
							}
							else {
								objUser[ userProperties[i] ] = null;
							}
						}
						return objUser;
					}

					$('#saveDataStorage').on('click', function() {
						// Datatable.getData() - Retorna dados padrao Datatable.dataRequest (Array / JSON)
						var actualData = dataTableUsers.getData();
						actualData.forEach( function(itemData,idx) { 
							var fieldId = 'changePassUser_' + itemData.userName;
							var isChecked = $('#' + fieldId).is(':checked')
							itemData['forceChangePassword'] = isChecked;
							// Corrigir atributo de tag HTML
							if (isChecked) {
								$('#' + fieldId).attr('checked', true);
							}
							else {
								$('#' + fieldId).attr('checked', null);
							}
						});
						
						// Percorrer tabela estado atual exibido e atualizar fonte de dados
						// $('#tableUsers [id*=changePassUser_]').each( function(idx,el) { 
						// 	console.log( 'el ==>> id="' + el.id + '" IS CHECKED? ' + $(this).is(':checked')); 
						// 	dataUsers[idx]['forceChangePassword'] = $(this).is(':checked');
						// });

						FLUIGC.localStorage.setItem('protheusUsersData', JSON.stringify( actualData ));
					});

					$('#loadDataStorage').on('click', function() {
						var objStored;
						try {
							objStored = $('textarea[name=dataSaved]').val() || JSON.stringify( FLUIGC.localStorage.getItem('protheusUsersData') );
							objStored = JSON.parse( objStored );
							// Array of Array - Vetor de valores, dados de usuario(s)
							if (Array.isArray(objStored) && Array.isArray(objStored[0])) {
								// Transformar itens do vetor em objeto de dados
								objStored.forEach(function(itemData,idx) {
									objStored[idx] = getUserObject(itemData);
								})
							}
							// dataUsers = objStored;
							dataTableUsers.reload(objStored, '.tableUserLine');

							fsApplyFields(false);

							// ATUALIZAR VALOR DE DADOS INICIAL / ATUAL
							dataUsers = dataTableUsers.getData();

							// CRIAR ORGANOGRAMA
							fsInitOrgChart();

						} catch (error) {
							FLUIGC.toast({
								title: 'C&oacute;digo de dados: ',
								message: 'Falha de carregamento!',
								type: 'warning'
							});
							// FIXME FLUIGC.toast "ERROR" não fechar automaticamento, timeout configurado
							FLUIGC.toast({
								title: 'ERROR: ',
								message: error.message,
								timeout: 1000,
								type: 'danger'
							});
						}
					});

					/**
					 * Aplicar fluig Style Guide aos elementos
					 */
					function fsApplyFields(showAlert) {
						// FS Password - input[type=password][id*=prefix_]
						// Campo senha com valor exibivel (mostrar/ocultar)
						$('input[type=password][id*=userPass_]').each(function(idx,el) {
							FLUIGC.password( el , {
								eyeClass: 'fluigicon',
								eyeOpenClass: 'fluigicon-eye-open',
								eyeCloseClass: 'fluigicon-key'
							});
						});
						
						// FS Switcher - input[type=checkbox] | inputs with [data-import-value=true]
						// Incluir atributo "checked" no elemento HTML marcado
						$('.appSwitcherStyle [data-import-value=true]').attr('checked',true);
						FLUIGC.switcher.initAll('.' + 'appSwitcherStyle');

						if (showAlert == undefined || showAlert /* typeof(showAlert) == "boolean" */ ) {
							FLUIGC.toast({
								title: 'C&oacute;digo de dados: ',
								message: 'Conte&uacute;do listado na tabela',
								type: 'success'
							});
						}
					}

					/**
					 * Construir fluig Style Guide Organizational Chart
					 * com dados carregados
					 */
					function fsInitOrgChart() {
						var baseUrl = 'http://suaempresa.fluig.com/style-guide';
						var selectorTarget = '#orgChart';
						var imgThumbUser = baseUrl + "/images/user_picture.png";
						var idOffset = 1;
						var orgUsers = [
							{id: 1, img: baseUrl + '/images/logo-demo-map.png', name: 'My Organization', parent: 0}
						];
						var settings = {};

						var fnFindParent = function(managerValue) {
							var parentIds = [ ];
							var idOffset  = 001;
							if (typeof(managerValue) == 'undefined') {
								parentIds = idOffset;
							}
							else {
								dataUsers.filter(function(currentValue,index,arr) {
									// console.log('\t' + index + ':\t'
									// 	+ 'currentValue{ \'registration\': ' + currentValue['registration'] + ', '
									// 	+ '\'manager\': ' + currentValue['manager'] + '\t}\t'
									// 	+ 'this: ' + this + '\t'
									// 	+ '\t return: ' + (currentValue.manager.indexOf(this))
									// );
									// if(currentValue.manager.indexOf(this) >= 0) {
									if (typeof(currentValue.manager) != 'undefined') { 
										if ((Array.isArray(this) && currentValue.manager.indexOf(this[0].managerId) >= 0)
											|| currentValue.manager.indexOf(this) >= 0) {
											parentIds.push(index + idOffset);
										}
									}}
								}, managerValue);
							}
							// fluig Style Guide - Organizational Chart falha array.length maior 1
							if (parentIds.length > 0) {
								// 1 - ID padrão maior elemento no organograma
								parentIds = parentIds[0];
							}
							return parentIds;
						}

						dataUsers.forEach(function(el,idx) {
							var orgItemData = {
								id: (++idx) + idOffset,
								img: imgThumbUser,
								name: el.displayName,
								description: (el.emails.toString() + '\n' + el.title),
								parent: fnFindParent(el.manager)
							};
							orgUsers.push( orgItemData );
						});

						// dataUsers.forEach(function(objUser,idx) {
						// 	orgUsers[++idx].parent;
						// });

						settings['data'] = orgUsers;

						var testOrgChart = FLUIGC.orgChart('#orgChart', settings);
						testOrgChart.on('fluig.orgchart.node.click', null);
						testOrgChart.on('fluig.orgchart.node.click', function(node){
							FLUIGC.toast({
								title: 'Node clicked: ',
								message: node.data.name,
								type: 'success'
							});
						});
					}
				</script>
			</div>

		</div>

		<!-- fluig Style Guide - Organizational Chart -->
		<div class="col-md-4" id="orgChartContainer">
			
			<h2>Organizational Chart</h2>
    
			<div id="orgChart"></div> <!--The target, where the organizational chart will be placed.-->

			<script language="javascript">
				var testData = [
					{id: 1, img: 'http://suaempresa.fluig.com/style-guide/images/logo-demo-map.png', name: 'My Organization', parent: 0},
					{id: 2, img: 'http://suaempresa.fluig.com/style-guide/images/user_picture.png', name: 'Person 1', description: "CEO", parent: 1},
					{id: 3, img: 'http://suaempresa.fluig.com/style-guide/images/user_picture.png', name: 'Person 2', description: "Division 1 VP", parent: 2},
					{id: 4, img: 'http://suaempresa.fluig.com/style-guide/images/user_picture.png', name: 'Person 3', description: "Division 2 VP", parent: 2},
					{id: 6, img: 'http://suaempresa.fluig.com/style-guide/images/user_picture.png', name: 'Person 4', description: "Division 1 Director", parent: 3},
					{id: 7, img: 'http://suaempresa.fluig.com/style-guide/images/user_picture.png', name: 'Person 5', description: "Division 1 Director", parent: 3},
					{id: 8, img: 'http://suaempresa.fluig.com/style-guide/images/user_picture.png', name: 'Person 6', description: "Division 2 Director", parent: 4}
				];
				// <img class="fluigicon fluigicon-user-card fluigicon-xl img-rounded media-object" src="./images/user_picture.png">
				var settings = {
					data: testData
				}
				var testOrgChart = FLUIGC.orgChart('#orgChart', settings);
				testOrgChart.on('fluig.orgchart.node.click', function(node){
					FLUIGC.toast({
						title: 'Node clicked: ',
						message: node.data.name,
						type: 'success'
					});
				});
			</script>

		</div>

	</div>

</body>

<script type="text/javascript" src="js/fileToRead.js"></script>

</html>